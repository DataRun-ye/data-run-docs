
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Hamza">
      
      
      
      
        <link rel="next" href="data-run-analytics/">
      
      
        
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>NMCP Yemen Info System Docs</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#datarun-system" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="NMCP Yemen Info System Docs" class="md-header__button md-logo" aria-label="NMCP Yemen Info System Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NMCP Yemen Info System Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              DataRun System
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="NMCP Yemen Info System Docs" class="md-nav__button md-logo" aria-label="NMCP Yemen Info System Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    NMCP Yemen Info System Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    DataRun System
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    DataRun System
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#executive-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Executive Summary
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Introduction
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-purpose" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 Purpose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-scope" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 Scope
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-datarun-system-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. DataRun System Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. DataRun System Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-description-value-proposition" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Description &amp; Value Proposition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-high-level-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 High-Level Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-system-objectives" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 System Objectives
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-key-features" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4 Key Features
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-mobile-data-collection" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Mobile &amp; Data Collection
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Mobile &amp; Data Collection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-dynamic-data-collection-forms" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Dynamic Data Collection Forms
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-mobile-first-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Mobile-First Design
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-data-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Data Flow
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-backend-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Backend Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Backend Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-hybrid-database-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 Hybrid Database Setup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-advanced-api-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Advanced API Capabilities
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-security-and-compliance" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Security and Compliance
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Security and Compliance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-security-measures" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Security Measures
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-security-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Security Architecture
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-use-case-itns-distribution-campaign" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Use Case: ITNs Distribution Campaign
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Use Case: ITNs Distribution Campaign">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-decisions-fo-supervisor-role" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration decisions fo Supervisor Role
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-workflow-and-automation" class="md-nav__link">
    <span class="md-ellipsis">
      
        System Workflow and Automation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-other-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Other Use Cases:
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-implementation-roadmap" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Implementation Roadmap
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="data-run-analytics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data run analytics
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="datarun-system">DataRun System<a class="headerlink" href="#datarun-system" title="Permanent link">&para;</a></h1>
<p><strong>National Malaria Control Program (NMCP), Yemen</strong><br />
<em>Comprehensive Data Management Solution for Malaria Control Operations</em></p>
<h2 id="executive-summary">Executive Summary<a class="headerlink" href="#executive-summary" title="Permanent link">&para;</a></h2>
<p>DataRun is a purpose-built, modular data management platform designed to streamline NMCP's field operations, data collection, and intervention planning. Developed in-house with zero licensing costs, it offers full ownership, offline functionality, and seamless integration with existing health systems. Key benefits include enhanced data integrity, real-time decision-making tools, and adaptable workflows for malaria-specific campaigns.</p>
<h2 id="1-introduction">1. Introduction<a class="headerlink" href="#1-introduction" title="Permanent link">&para;</a></h2>
<h3 id="11-purpose">1.1 Purpose<a class="headerlink" href="#11-purpose" title="Permanent link">&para;</a></h3>
<p>This document provides a comprehensive overview of the DataRun system, designed specifically for managing activities and data for the National Malaria Control Program (NMCP). It serves as a foundational reference for understanding the system’s architecture, features, and functionalities, and is intended to guide ongoing development, maintenance, and integration with other health information systems.</p>
<h3 id="12-scope">1.2 Scope<a class="headerlink" href="#12-scope" title="Permanent link">&para;</a></h3>
<p>Covers system architecture, core features, security protocols, and strategic advantages. Designed to facilitate informed decisions on nationwide rollout and integration.  </p>
<p><strong>Resource Portal</strong>:<br />
Access live documentation, API guides, and updates at <a href="https://docs.nmcpye.org">https://docs.nmcpye.org</a>.</p>
<hr />
<h2 id="2-datarun-system-overview">2. DataRun System Overview<a class="headerlink" href="#2-datarun-system-overview" title="Permanent link">&para;</a></h2>
<h3 id="21-description-value-proposition">2.1 Description &amp; Value Proposition<a class="headerlink" href="#21-description-value-proposition" title="Permanent link">&para;</a></h3>
<p><strong>What is DataRun?</strong><br />
DataRun is a dynamic, modular data management system tailored to the NMCP’s needs. It supports field operations by dynamically configuring projects, activities, teams, assignments, and organizational units (including field warehouses). Its key value propositions include:</p>
<table>
<thead>
<tr>
<th><strong>Feature</strong></th>
<th><strong>Typical Systems</strong></th>
<th><strong>DataRun</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Cost</strong></td>
<td>$5k+/year subscriptions</td>
<td><strong>Zero licensing fees</strong></td>
</tr>
<tr>
<td><strong>Control</strong></td>
<td>Vendor-locked</td>
<td>Full NMCP ownership</td>
</tr>
<tr>
<td><strong>Customization</strong></td>
<td>Generic templates</td>
<td>Malaria-optimized workflows</td>
</tr>
<tr>
<td><strong>Data Hosting</strong></td>
<td>Offshore servers</td>
<td>On-premise/Yemeni cloud</td>
</tr>
</tbody>
</table>
<h3 id="22-high-level-architecture">2.2 High-Level Architecture<a class="headerlink" href="#22-high-level-architecture" title="Permanent link">&para;</a></h3>
<p><strong>System Modules:</strong></p>
<ul>
<li><strong>Mobile App:</strong>  </li>
<li>Provides offline data capture with encrypted local storage (SQLite with AES-256).</li>
<li>
<p>Synchronizes data via HTTPS and supports real-time authentication using OAuth2.</p>
</li>
<li>
<p><strong>Backend Services:</strong>  </p>
</li>
<li><strong>Spring Boot API:</strong> Connects to both PostgreSQL (for metadata) and MongoDB (for dynamic data) and utilizes Redis for caching.</li>
<li>
<p><strong>Authentication:</strong> Managed by Keycloak, ensuring secure role-based access.</p>
</li>
<li>
<p><strong>Integrations:</strong>  </p>
</li>
<li>
<p>Supports formats like ODK, RESTful API integrations (e.g., PowerBI, DHIS2), and webhooks for seamless interoperability.</p>
</li>
<li>
<p><strong>Security:</strong>  </p>
</li>
<li>Implements TLS 1.3 for secure communications.</li>
<li>Employs an audit service to log and monitor all user interactions.</li>
</ul>
<p><strong>Architecture Diagram:</strong>
<img alt="001-High-Level System Architecture" src="screenshots/001-High-Level%20System%20Architecture-adaptive-adaptive.svg" /></p>
<h3 id="23-system-objectives">2.3 System Objectives<a class="headerlink" href="#23-system-objectives" title="Permanent link">&para;</a></h3>
<p>DataRun is engineered to:</p>
<ul>
<li><strong>Enhance Data Management:</strong> Streamline the collection, processing, and storage of NMCP-related data.</li>
<li><strong>Support Informed Decision-Making:</strong> Provide robust tools and reports for effective malaria control and prevention.</li>
<li><strong>Enable Field Data Collection:</strong> Allow offline data collection in remote areas with later synchronization.</li>
<li><strong>Ensure Data Integrity:</strong> Maintain strict data quality and traceability standards.</li>
<li><strong>Improve Intervention Planning:</strong> Leverage reusability of activity data to optimize cost and planning efficiency.</li>
</ul>
<h3 id="24-key-features">2.4 Key Features<a class="headerlink" href="#24-key-features" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Project Management:</strong>  </li>
<li>
<p>Capture departmental efforts as distinct projects (e.g., ITNs distribution, larvicide campaigns).</p>
</li>
<li>
<p><strong>Field Activities:</strong>  </p>
</li>
<li>Target entities such as locations, health facilities, or individuals.</li>
<li>
<p>Manage tasks like team supervision, resource distribution, and data collection.</p>
</li>
<li>
<p><strong>Assignments &amp; Tracking:</strong>  </p>
</li>
<li>Link activities with teams, organizational units, and scheduling.</li>
<li>
<p>Use reference forms to track locations and resource allocations.</p>
</li>
<li>
<p><strong>Dynamic Data Forms:</strong>  </p>
</li>
<li>Create customizable data collection forms to capture relevant, activity-specific data.</li>
<li>
<p>Support offline data entry with subsequent synchronization.</p>
</li>
<li>
<p><strong>Data Visualization:</strong>  </p>
</li>
<li>
<p>Generate pivot tables, charts, and dashboards for effective data analysis and reporting.</p>
</li>
<li>
<p><strong>Interoperability:</strong>  </p>
</li>
<li>Open API architecture allows easy integration with platforms such as DHIS2, ODK, HRMS, LMIS, and supply chain systems.</li>
</ul>
<hr />
<h2 id="3-mobile-data-collection">3. Mobile &amp; Data Collection<a class="headerlink" href="#3-mobile-data-collection" title="Permanent link">&para;</a></h2>
<h3 id="31-dynamic-data-collection-forms">3.1 Dynamic Data Collection Forms<a class="headerlink" href="#31-dynamic-data-collection-forms" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Form Templates:</strong>  </li>
<li>Support multiple field types (e.g., integer, date, entity references).</li>
<li>Customizable for specific activities and team assignments.</li>
</ul>
<h3 id="32-mobile-first-design">3.2 Mobile-First Design<a class="headerlink" href="#32-mobile-first-design" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Offline-First Functionality:</strong>  </li>
<li>
<p>Allow form completion without connectivity; sync data when online.</p>
</li>
<li>
<p><strong>User Modes:</strong>  </p>
</li>
<li><strong>Supervisors:</strong> Access real-time summaries and transaction histories.</li>
<li>
<p><strong>Field Users:</strong> seamless data entry with dynamic form rendering.</p>
</li>
<li>
<p><strong>Key Technologies:</strong>  </p>
</li>
<li><strong>SQLite:</strong> For secure, local storage (AES-256 encryption).</li>
<li><strong>WorkManager:</strong> For scheduling background sync tasks.</li>
<li><strong>Conflict Resolution:</strong> Configurable mechanisms (e.g., last-write-win, server-win) with versioning.</li>
</ul>
<h3 id="33-data-flow">3.3 Data Flow<a class="headerlink" href="#33-data-flow" title="Permanent link">&para;</a></h3>
<p><img alt="Data Flow" src="screenshots/002-Data%20Flow%20Diagram.svg" /></p>
<hr />
<h2 id="4-backend-architecture">4. Backend Architecture<a class="headerlink" href="#4-backend-architecture" title="Permanent link">&para;</a></h2>
<h3 id="41-hybrid-database-setup">4.1 Hybrid Database Setup<a class="headerlink" href="#41-hybrid-database-setup" title="Permanent link">&para;</a></h3>
<p>DataRun utilizes a hybrid database approach:</p>
<ul>
<li><strong>PostgreSQL:</strong>  </li>
<li>
<p>Manages structured metadata (users, teams, assignments, organizational units).</p>
</li>
<li>
<p><strong>MongoDB:</strong>  </p>
</li>
<li>Stores dynamic data including forms, submissions, and rapidly evolving entities.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>                 +---------------------+
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>                 |   Spring Boot API   |
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>                 +----------+----------+
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>                            |
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>           +----------------+-----------------+
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>           |                                  |
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>+----------+----------+             +---------+----------+
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>| PostgreSQL (RDBMS)  |             | MongoDB (NoSQL)    |
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>| - Users             |             | - Data Forms       |
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>| - Teams             |             | - Submissions      |
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>| - Assignments       |             | - Dynamic Entities |
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>| - OrgUnits          |             | - ... Other        |
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>| - ...Other          |             +--------------------+
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>+---------------------+
</code></pre></div>
<h3 id="42-advanced-api-capabilities">4.2 Advanced API Capabilities<a class="headerlink" href="#42-advanced-api-capabilities" title="Permanent link">&para;</a></h3>
<h4 id="hybrid-query-engine">Hybrid Query Engine<a class="headerlink" href="#hybrid-query-engine" title="Permanent link">&para;</a></h4>
<p>The engine supports advanced querying with virtual joins across PostgreSQL and MongoDB, enhanced by a Redis caching layer.</p>
<p><strong>Example API Query:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="err">GET /api/v1/dataSubmissions?query={</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="err">  &quot;$and&quot;: [</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="err">    {&quot;assignment.region&quot;: &quot;Aden&quot;}, </span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="err">    {&quot;submissionDate&quot;: {&quot;$gte&quot;: &quot;2023-10-01&quot;}},</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="err">    {&quot;status&quot;: &quot;approved&quot;}</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="err">  ]</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="err">}&amp;fields=[&quot;team.id&quot;,&quot;items.count&quot;]&amp;page=2&amp;size=50</span>
</code></pre></div>
<p><strong>Engine Execution Flow:</strong></p>
<pre class="mermaid"><code>flowchart TD
    REQ[API Request] --&gt; Parser
    Parser --&gt;|Extract Filters| QE[Query Engine]
    QE --&gt;|SQL| PG[PostgreSQL]
    QE --&gt;|MQL| MG[MongoDB]
    PG --&gt;|JDBC| Combiner
    MG --&gt;|Mongo Driver| Combiner
    Combiner --&gt;|Normalize| Formatter
    Formatter --&gt;|JSON:API| RESP[Response]</code></pre>
<hr />
<h2 id="5-security-and-compliance">5. Security and Compliance<a class="headerlink" href="#5-security-and-compliance" title="Permanent link">&para;</a></h2>
<h3 id="51-security-measures">5.1 Security Measures<a class="headerlink" href="#51-security-measures" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>End-to-End Encryption:</strong>  </li>
<li>
<p>Encrypts data in transit (TLS 1.3 with certificate pinning) and at rest (SQLCipher, AES-256-XTS).</p>
</li>
<li>
<p><strong>Authentication &amp; RBAC:</strong>  </p>
</li>
<li>
<p>OAuth2 with Keycloak ensures secure, role-based access control.</p>
</li>
<li>
<p><strong>Audit Trails:</strong>  </p>
</li>
<li>Comprehensive logging using PostgreSQL Audit Extensions for immutable record keeping.</li>
</ul>
<h3 id="52-security-architecture">5.2 Security Architecture<a class="headerlink" href="#52-security-architecture" title="Permanent link">&para;</a></h3>
<p><img alt="alt text" src="screenshots/003-Security%20Architecture-adaptive.svg" /></p>
<p><strong>Compliance Standards:</strong></p>
<ul>
<li>Yemeni Ministry of Health Privacy Guidelines</li>
<li>WHO Malaria Data Standards</li>
</ul>
<hr />
<h2 id="6-use-case-itns-distribution-campaign">6. Use Case: ITNs Distribution Campaign<a class="headerlink" href="#6-use-case-itns-distribution-campaign" title="Permanent link">&para;</a></h2>
<p><strong>Workflow Overview:</strong></p>
<ol>
<li><strong>Central Warehouse:</strong>  </li>
<li>Allocate 10,000 nets.</li>
<li>
<p>Create assignments:</p>
<ul>
<li><strong>Team A:</strong> 5,000 nets.</li>
<li><strong>Team B:</strong> 5,000 nets.</li>
</ul>
</li>
<li>
<p><strong>Field Operations:</strong>  </p>
</li>
<li>Field teams scan QR codes.</li>
<li>
<p>Submit distribution forms capturing:</p>
<ul>
<li>Nets received (5,000)</li>
<li>Nets distributed (e.g., 4,872)</li>
<li>GPS verification (e.g., -12.3, 44.5)</li>
</ul>
</li>
<li>
<p><strong>Dashboard Reporting:</strong>  </p>
</li>
<li>Real-time dashboards indicate 97.4% coverage.</li>
<li>Automatic flagging of discrepancies greater than 2%.</li>
</ol>
<p><strong>Roles:</strong></p>
<ul>
<li><strong>Supervisor:</strong>  </li>
<li>Registers daily resource movements.</li>
<li>
<p>Accesses real-time summaries and detailed logs.</p>
</li>
<li>
<p><strong>Field Team:</strong>  </p>
</li>
<li>Receives assignments based on planned distributions.</li>
<li>
<p>Uses dynamic forms for data entry (both offline and online).</p>
</li>
<li>
<p><strong>Inventory Reports and Online Management</strong><br />
Inventory reports can be configured to be managed online/offline. e.g. When WH operations are configured to be Online operations, it ensures quantities are handled directly and accurately, without discrepancies or errors.  </p>
</li>
</ul>
<p>Key functionalities include:<br />
1. <strong>Stock Issuance and Returns</strong>:<br />
   - A team can issue items from their assigned inventory and return them later.<br />
   - Stock transfers can occur between teams or between warehouses.  </p>
<ol>
<li><strong>Restrictions on Inventory Use</strong>:  </li>
<li>Teams can only issue items if there’s sufficient stock available (configurable).  </li>
<li>
<p>If a team issues stock to another warehouse, the receiving warehouse's stock must increase accordingly.  </p>
</li>
<li>
<p><strong>Offline Discrepancy Handling</strong>:  </p>
</li>
<li>If stock movement occurs while a team is offline (per configuration) (e.g., a team issues stock but doesn’t have connectivity), the operations team can manually reconcile the discrepancy.  </li>
</ol>
<hr />
<h3 id="configuration-decisions-fo-supervisor-role"><strong>Configuration decisions fo Supervisor Role</strong><a class="headerlink" href="#configuration-decisions-fo-supervisor-role" title="Permanent link">&para;</a></h3>
<p>Supervisors can:<br />
1. <strong>Access Team Reports and Summaries</strong>:<br />
   - Supervisors can view historical reports such as village updates, inventory changes, or any team activities. These reports are organized chronologically, much like a bank statement.  </p>
<ol>
<li><strong>Reassign Villages Between Teams</strong>:  </li>
<li>If a team is unable to cover a village or if another team covers it instead, supervisors can reassign the village from the first team to the second.  </li>
<li>
<p>Once reassigned, the new team will see the task as <strong>overdue</strong> and must submit the required report promptly.  </p>
</li>
<li>
<p><strong>Manage Same-Day Tasks</strong>:  </p>
</li>
<li>Villages scheduled for the current day must be addressed on the same day.  </li>
<li>If a village needs to be postponed, supervisors must <strong>reschedule it for another day</strong> and specify the new date.  </li>
</ol>
<h3 id="system-workflow-and-automation"><strong>System Workflow and Automation</strong><a class="headerlink" href="#system-workflow-and-automation" title="Permanent link">&para;</a></h3>
<ul>
<li>The system ensures that every campaign or operation ends with complete and accurate reports for all assigned villages.  </li>
<li>Each village has a detailed history, showing:  </li>
<li>How it started.  </li>
<li>The team initially responsible.  </li>
<li>Any reassignment history (whether by date or between teams).  </li>
</ul>
<h2 id="7-other-use-cases">7. Other Use Cases:<a class="headerlink" href="#7-other-use-cases" title="Permanent link">&para;</a></h2>
<p>Datarun can be configured to manage most NMCP activities workflows, such as:
- Routine Data for health facilities malaria cases, submitted or linked to external system such as <code>EIdews</code>.
- ICCM data, routine data submission from community volunteers, supervision visit data...etc
- other workflow per need.</p>
<hr />
<h2 id="7-implementation-roadmap">7. Implementation Roadmap<a class="headerlink" href="#7-implementation-roadmap" title="Permanent link">&para;</a></h2>
<p><strong>Timeline:</strong></p>
<pre class="mermaid"><code>gantt
    title Deployment Phases
    dateFormat  YYYY-MM-DD
    section Phase 1
    Training       :2024-08-01, 30d
    Larvicide Campaign   :2024-09-22, 6d
    ITNs Campaign   :2024-11-12, 18d
    section Phase 2
    Training  :2025-04-01, 120d
    ICCM Rollout  :2025-04-01, 60d
    1000 HFs LMIS Rollout :2025-05-01, 90d</code></pre>
<p><strong>Resource Requirements:</strong></p>
<ul>
<li>NMCP Technical Working Group Training  </li>
<li>Field Coordinator Training</li>
</ul>
<hr />
<h1 id="9-user-interface">9. User Interface<a class="headerlink" href="#9-user-interface" title="Permanent link">&para;</a></h1>
<h2 id="91-desktop-interfaces">9.1 Desktop Interfaces<a class="headerlink" href="#91-desktop-interfaces" title="Permanent link">&para;</a></h2>
<h3 id="911-activities-and-user-management">9.1.1 Activities and User Management<a class="headerlink" href="#911-activities-and-user-management" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>Activities Management:</strong><br />
<img alt="Activity's Teams Management" src="screenshots/activities_management_screen.jpg" /></p>
</li>
<li>
<p><strong>Teams Management:</strong><br />
<img alt="Teams Management Screen" src="screenshots/Activity_teams_management_screen.jpg" /></p>
</li>
<li>
<p><strong>User Management:</strong><br />
<img alt="User Management" src="screenshots/user_management.jpg" /></p>
</li>
</ul>
<h3 id="912-form-templates-and-elements">9.1.2 Form Templates and Elements<a class="headerlink" href="#912-form-templates-and-elements" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Data Elements Management:</strong><br />
<img alt="1" src="screenshots/data_element_1.jpg" /></li>
</ul>
<p><img alt="2" src="screenshots/data_element_2.jpg" /></p>
<ul>
<li><strong>Options and OptionSets:</strong><br />
<img alt="Options Management" src="screenshots/Options_OptionSet_management_and_definitions_1.jpg" /></li>
</ul>
<p><img alt="OptionSets Definitions" src="screenshots/Options_OptionSet_management_and_definitions_2.jpg" /></p>
<h3 id="913-form-template-builder">9.1.3 Form Template Builder<a class="headerlink" href="#913-form-template-builder" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>Main Screen:</strong><br />
<img alt="Form Template Builder Main Screen" src="screenshots/form_templates_builder_main_screen.jpg" /></p>
</li>
<li>
<p><strong>Template Management:</strong><br />
<img alt="Form Template Management" src="screenshots/form_templates_builder_form_template_definition_screen.jpg" /></p>
</li>
<li>
<p><strong>Sections &amp; Data Elements Selection:</strong><br />
<img alt="Sections Management" src="screenshots/form_templates_builder_sections_management_definition.jpg" />
  <img alt="Data Elements Selection" src="screenshots/form_templates_builder_dataelements_selection.jpg" /></p>
</li>
<li>
<p><strong>Rules and Expressions:</strong><br />
<img alt="Rules Definition Screen" src="screenshots/form_templates_builder_rules_definition_screen.jpg" />
  <img alt="Rules Expressions" src="screenshots/form_templates_builder_rules_expressions.jpg" /></p>
</li>
</ul>
<h2 id="92-mobile-app">9.2 Mobile App<a class="headerlink" href="#92-mobile-app" title="Permanent link">&para;</a></h2>
<p>Datarun-Mobile's app was developed with dart (Flutter). The app facilitates the submission and synchronization of malaria-related data with the
main backend system.</p>
<h2 id="features">Features<a class="headerlink" href="#features" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Dynamic Form Download</strong>: The app downloads forms designed on the backend, which can include
  various question types.</li>
<li><strong>Question Types</strong>: Supports Text, Number, Date, Multi Answer, Single Answer, Image, and File
  questions.</li>
<li><strong>Data Submission</strong>: Users can submit various malaria-related data directly from the app.</li>
<li><strong>Data Synchronization</strong>: The app syncs submitted data with the Data-run-Api, ensuring all
  information is up-to-date.</li>
<li><strong>User Authentication</strong>: Secure login and authentication to ensure data integrity and privacy.</li>
<li><strong>User Management</strong>: Quickly create users and assign them to particular teams.
  connection is restored.</li>
<li><strong>User-Friendly Interface</strong>: Simple and intuitive design to facilitate ease of use by healthcare
  workers.</li>
</ul>
<h3 id="921-assignmenttasks-card">9.2.1 Assignment/task's card:<a class="headerlink" href="#921-assignmenttasks-card" title="Permanent link">&para;</a></h3>
<p>| <img alt="1" src="https://github.com/user-attachments/assets/e16f955c-e9c8-4633-b280-3ae52403f945" />   | <img alt="2" src="https://github.com/user-attachments/assets/9b4b9d96-180a-4e75-9c32-ce00588401a5" />  |</p>
<h3 id="922-v100-app-interfaces">9.2.2 V1.0.0 App interfaces<a class="headerlink" href="#922-v100-app-interfaces" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th><img alt="activity landing page" src="https://raw.githubusercontent.com/Hamza-ye/images-uploads/refs/heads/main/v1.0.2-assets/screenshots/001.png" /></th>
<th><img alt="2" src="https://raw.githubusercontent.com/Hamza-ye/images-uploads/refs/heads/main/v1.0.2-assets/screenshots/002.png" /></th>
<th><img alt="3" src="https://raw.githubusercontent.com/Hamza-ye/images-uploads/refs/heads/main/v1.0.2-assets/screenshots/003.png" /></th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="4" src="https://raw.githubusercontent.com/Hamza-ye/images-uploads/refs/heads/main/v1.0.2-assets/screenshots/004.png" /></td>
<td><img alt="5" src="https://raw.githubusercontent.com/Hamza-ye/images-uploads/refs/heads/main/v1.0.2-assets/screenshots/005.png" /></td>
<td><img alt="6" src="https://raw.githubusercontent.com/Hamza-ye/images-uploads/refs/heads/main/v1.0.2-assets/screenshots/006.png" /></td>
</tr>
<tr>
<td><img alt="7" src="https://raw.githubusercontent.com/Hamza-ye/images-uploads/refs/heads/main/v1.0.2-assets/screenshots/007.png" /></td>
<td><img alt="8" src="https://raw.githubusercontent.com/Hamza-ye/images-uploads/refs/heads/main/v1.0.2-assets/screenshots/008.png" /></td>
<td><img alt="9" src="https://raw.githubusercontent.com/Hamza-ye/images-uploads/refs/heads/main/v1.0.2-assets/screenshots/009.png" /></td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
        
          
          <a href="data-run-analytics/" class="md-footer__link md-footer__link--next" aria-label="Next: Data run analytics">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Data run analytics
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": ".", "features": ["announce.dismiss", "content.code.annotate", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
      
        <script src="javascripts/tablesort.js"></script>
      
        <script src="javascripts/extra.js"></script>
      
    
  </body>
</html>