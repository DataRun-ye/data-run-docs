{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"DataRun System","text":"<p>National Malaria Control Program (NMCP), Yemen Comprehensive Data Management Solution for Malaria Control Operations</p>"},{"location":"#executive-summary","title":"Executive Summary","text":"<p>DataRun is a purpose-built, modular data management platform designed to streamline NMCP's field operations, data collection, and intervention planning. Developed in-house with zero licensing costs, it offers full ownership, offline functionality, and seamless integration with existing health systems. Key benefits include enhanced data integrity, real-time decision-making tools, and adaptable workflows for malaria-specific campaigns.</p>"},{"location":"#1-introduction","title":"1. Introduction","text":""},{"location":"#11-purpose","title":"1.1 Purpose","text":"<p>This document provides a comprehensive overview of the DataRun system, designed specifically for managing activities and data for the National Malaria Control Program (NMCP). It serves as a foundational reference for understanding the system\u2019s architecture, features, and functionalities, and is intended to guide ongoing development, maintenance, and integration with other health information systems.</p>"},{"location":"#12-scope","title":"1.2 Scope","text":"<p>Covers system architecture, core features, security protocols, and strategic advantages. Designed to facilitate informed decisions on nationwide rollout and integration.  </p> <p>Resource Portal: Access live documentation, API guides, and updates at https://docs.nmcpye.org.</p>"},{"location":"#2-datarun-system-overview","title":"2. DataRun System Overview","text":""},{"location":"#21-description-value-proposition","title":"2.1 Description &amp; Value Proposition","text":"<p>What is DataRun? DataRun is a dynamic, modular data management system tailored to the NMCP\u2019s needs. It supports field operations by dynamically configuring projects, activities, teams, assignments, and organizational units (including field warehouses). Its key value propositions include:</p> Feature Typical Systems DataRun Cost $5k+/year subscriptions Zero licensing fees Control Vendor-locked Full NMCP ownership Customization Generic templates Malaria-optimized workflows Data Hosting Offshore servers On-premise/Yemeni cloud"},{"location":"#22-high-level-architecture","title":"2.2 High-Level Architecture","text":"<p>System Modules:</p> <ul> <li>Mobile App: </li> <li>Provides offline data capture with encrypted local storage (SQLite with AES-256).</li> <li> <p>Synchronizes data via HTTPS and supports real-time authentication using OAuth2.</p> </li> <li> <p>Backend Services: </p> </li> <li>Spring Boot API: Connects to both PostgreSQL (for metadata) and MongoDB (for dynamic data) and utilizes Redis for caching.</li> <li> <p>Authentication: Managed by Keycloak, ensuring secure role-based access.</p> </li> <li> <p>Integrations: </p> </li> <li> <p>Supports formats like ODK, RESTful API integrations (e.g., PowerBI, DHIS2), and webhooks for seamless interoperability.</p> </li> <li> <p>Security: </p> </li> <li>Implements TLS 1.3 for secure communications.</li> <li>Employs an audit service to log and monitor all user interactions.</li> </ul> <p>Architecture Diagram: </p>"},{"location":"#23-system-objectives","title":"2.3 System Objectives","text":"<p>DataRun is engineered to:</p> <ul> <li>Enhance Data Management: Streamline the collection, processing, and storage of NMCP-related data.</li> <li>Support Informed Decision-Making: Provide robust tools and reports for effective malaria control and prevention.</li> <li>Enable Field Data Collection: Allow offline data collection in remote areas with later synchronization.</li> <li>Ensure Data Integrity: Maintain strict data quality and traceability standards.</li> <li>Improve Intervention Planning: Leverage reusability of activity data to optimize cost and planning efficiency.</li> </ul>"},{"location":"#24-key-features","title":"2.4 Key Features","text":"<ul> <li>Project Management: </li> <li> <p>Capture departmental efforts as distinct projects (e.g., ITNs distribution, larvicide campaigns).</p> </li> <li> <p>Field Activities: </p> </li> <li>Target entities such as locations, health facilities, or individuals.</li> <li> <p>Manage tasks like team supervision, resource distribution, and data collection.</p> </li> <li> <p>Assignments &amp; Tracking: </p> </li> <li>Link activities with teams, organizational units, and scheduling.</li> <li> <p>Use reference forms to track locations and resource allocations.</p> </li> <li> <p>Dynamic Data Forms: </p> </li> <li>Create customizable data collection forms to capture relevant, activity-specific data.</li> <li> <p>Support offline data entry with subsequent synchronization.</p> </li> <li> <p>Data Visualization: </p> </li> <li> <p>Generate pivot tables, charts, and dashboards for effective data analysis and reporting.</p> </li> <li> <p>Interoperability: </p> </li> <li>Open API architecture allows easy integration with platforms such as DHIS2, ODK, HRMS, LMIS, and supply chain systems.</li> </ul>"},{"location":"#3-mobile-data-collection","title":"3. Mobile &amp; Data Collection","text":""},{"location":"#31-dynamic-data-collection-forms","title":"3.1 Dynamic Data Collection Forms","text":"<ul> <li>Form Templates: </li> <li>Support multiple field types (e.g., integer, date, entity references).</li> <li>Customizable for specific activities and team assignments.</li> </ul>"},{"location":"#32-mobile-first-design","title":"3.2 Mobile-First Design","text":"<ul> <li>Offline-First Functionality: </li> <li> <p>Allow form completion without connectivity; sync data when online.</p> </li> <li> <p>User Modes: </p> </li> <li>Supervisors: Access real-time summaries and transaction histories.</li> <li> <p>Field Users: seamless data entry with dynamic form rendering.</p> </li> <li> <p>Key Technologies: </p> </li> <li>SQLite: For secure, local storage (AES-256 encryption).</li> <li>WorkManager: For scheduling background sync tasks.</li> <li>Conflict Resolution: Configurable mechanisms (e.g., last-write-win, server-win) with versioning.</li> </ul>"},{"location":"#33-data-flow","title":"3.3 Data Flow","text":""},{"location":"#4-backend-architecture","title":"4. Backend Architecture","text":""},{"location":"#41-hybrid-database-setup","title":"4.1 Hybrid Database Setup","text":"<p>DataRun utilizes a hybrid database approach:</p> <ul> <li>PostgreSQL: </li> <li> <p>Manages structured metadata (users, teams, assignments, organizational units).</p> </li> <li> <p>MongoDB: </p> </li> <li>Stores dynamic data including forms, submissions, and rapidly evolving entities.</li> </ul> <pre><code>                 +---------------------+\n                 |   Spring Boot API   |\n                 +----------+----------+\n                            |\n           +----------------+-----------------+\n           |                                  |\n+----------+----------+             +---------+----------+\n| PostgreSQL (RDBMS)  |             | MongoDB (NoSQL)    |\n| - Users             |             | - Data Forms       |\n| - Teams             |             | - Submissions      |\n| - Assignments       |             | - Dynamic Entities |\n| - OrgUnits          |             | - ... Other        |\n| - ...Other          |             +--------------------+\n+---------------------+\n</code></pre>"},{"location":"#42-advanced-api-capabilities","title":"4.2 Advanced API Capabilities","text":""},{"location":"#hybrid-query-engine","title":"Hybrid Query Engine","text":"<p>The engine supports advanced querying with virtual joins across PostgreSQL and MongoDB, enhanced by a Redis caching layer.</p> <p>Example API Query:</p> <pre><code>GET /api/v1/dataSubmissions?query={\n  \"$and\": [\n    {\"assignment.region\": \"Aden\"}, \n    {\"submissionDate\": {\"$gte\": \"2023-10-01\"}},\n    {\"status\": \"approved\"}\n  ]\n}&amp;fields=[\"team.id\",\"items.count\"]&amp;page=2&amp;size=50\n</code></pre> <p>Engine Execution Flow:</p> <pre><code>flowchart TD\n    REQ[API Request] --&gt; Parser\n    Parser --&gt;|Extract Filters| QE[Query Engine]\n    QE --&gt;|SQL| PG[PostgreSQL]\n    QE --&gt;|MQL| MG[MongoDB]\n    PG --&gt;|JDBC| Combiner\n    MG --&gt;|Mongo Driver| Combiner\n    Combiner --&gt;|Normalize| Formatter\n    Formatter --&gt;|JSON:API| RESP[Response]</code></pre>"},{"location":"#5-security-and-compliance","title":"5. Security and Compliance","text":""},{"location":"#51-security-measures","title":"5.1 Security Measures","text":"<ul> <li>End-to-End Encryption: </li> <li> <p>Encrypts data in transit (TLS 1.3 with certificate pinning) and at rest (SQLCipher, AES-256-XTS).</p> </li> <li> <p>Authentication &amp; RBAC: </p> </li> <li> <p>OAuth2 with Keycloak ensures secure, role-based access control.</p> </li> <li> <p>Audit Trails: </p> </li> <li>Comprehensive logging using PostgreSQL Audit Extensions for immutable record keeping.</li> </ul>"},{"location":"#52-security-architecture","title":"5.2 Security Architecture","text":"<p>Compliance Standards:</p> <ul> <li>Yemeni Ministry of Health Privacy Guidelines</li> <li>WHO Malaria Data Standards</li> </ul>"},{"location":"#6-use-case-itns-distribution-campaign","title":"6. Use Case: ITNs Distribution Campaign","text":"<p>Workflow Overview:</p> <ol> <li>Central Warehouse: </li> <li>Allocate 10,000 nets.</li> <li> <p>Create assignments:</p> <ul> <li>Team A: 5,000 nets.</li> <li>Team B: 5,000 nets.</li> </ul> </li> <li> <p>Field Operations: </p> </li> <li>Field teams scan QR codes.</li> <li> <p>Submit distribution forms capturing:</p> <ul> <li>Nets received (5,000)</li> <li>Nets distributed (e.g., 4,872)</li> <li>GPS verification (e.g., -12.3, 44.5)</li> </ul> </li> <li> <p>Dashboard Reporting: </p> </li> <li>Real-time dashboards indicate 97.4% coverage.</li> <li>Automatic flagging of discrepancies greater than 2%.</li> </ol> <p>Roles:</p> <ul> <li>Supervisor: </li> <li>Registers daily resource movements.</li> <li> <p>Accesses real-time summaries and detailed logs.</p> </li> <li> <p>Field Team: </p> </li> <li>Receives assignments based on planned distributions.</li> <li> <p>Uses dynamic forms for data entry (both offline and online).</p> </li> <li> <p>Inventory Reports and Online Management Inventory reports can be configured to be managed online/offline. e.g. When WH operations are configured to be Online operations, it ensures quantities are handled directly and accurately, without discrepancies or errors.  </p> </li> </ul> <p>Key functionalities include: 1. Stock Issuance and Returns:    - A team can issue items from their assigned inventory and return them later.    - Stock transfers can occur between teams or between warehouses.  </p> <ol> <li>Restrictions on Inventory Use:  </li> <li>Teams can only issue items if there\u2019s sufficient stock available (configurable).  </li> <li> <p>If a team issues stock to another warehouse, the receiving warehouse's stock must increase accordingly.  </p> </li> <li> <p>Offline Discrepancy Handling:  </p> </li> <li>If stock movement occurs while a team is offline (per configuration) (e.g., a team issues stock but doesn\u2019t have connectivity), the operations team can manually reconcile the discrepancy.  </li> </ol>"},{"location":"#configuration-decisions-fo-supervisor-role","title":"Configuration decisions fo Supervisor Role","text":"<p>Supervisors can: 1. Access Team Reports and Summaries:    - Supervisors can view historical reports such as village updates, inventory changes, or any team activities. These reports are organized chronologically, much like a bank statement.  </p> <ol> <li>Reassign Villages Between Teams:  </li> <li>If a team is unable to cover a village or if another team covers it instead, supervisors can reassign the village from the first team to the second.  </li> <li> <p>Once reassigned, the new team will see the task as overdue and must submit the required report promptly.  </p> </li> <li> <p>Manage Same-Day Tasks:  </p> </li> <li>Villages scheduled for the current day must be addressed on the same day.  </li> <li>If a village needs to be postponed, supervisors must reschedule it for another day and specify the new date.  </li> </ol>"},{"location":"#system-workflow-and-automation","title":"System Workflow and Automation","text":"<ul> <li>The system ensures that every campaign or operation ends with complete and accurate reports for all assigned villages.  </li> <li>Each village has a detailed history, showing:  </li> <li>How it started.  </li> <li>The team initially responsible.  </li> <li>Any reassignment history (whether by date or between teams).  </li> </ul>"},{"location":"#7-other-use-cases","title":"7. Other Use Cases:","text":"<p>Datarun can be configured to manage most NMCP activities workflows, such as: - Routine Data for health facilities malaria cases, submitted or linked to external system such as <code>EIdews</code>. - ICCM data, routine data submission from community volunteers, supervision visit data...etc - other workflow per need.</p>"},{"location":"#7-implementation-roadmap","title":"7. Implementation Roadmap","text":"<p>Timeline:</p> <pre><code>gantt\n    title Deployment Phases\n    dateFormat  YYYY-MM-DD\n    section Phase 1\n    Training       :2024-08-01, 30d\n    Larvicide Campaign   :2024-09-22, 6d\n    ITNs Campaign   :2024-11-12, 18d\n    section Phase 2\n    Training  :2025-04-01, 120d\n    ICCM Rollout  :2025-04-01, 60d\n    1000 HFs LMIS Rollout :2025-05-01, 90d</code></pre> <p>Resource Requirements:</p> <ul> <li>NMCP Technical Working Group Training  </li> <li>Field Coordinator Training</li> </ul>"},{"location":"#9-user-interface","title":"9. User Interface","text":""},{"location":"#91-desktop-interfaces","title":"9.1 Desktop Interfaces","text":""},{"location":"#911-activities-and-user-management","title":"9.1.1 Activities and User Management","text":"<ul> <li> <p>Activities Management: </p> </li> <li> <p>Teams Management: </p> </li> <li> <p>User Management: </p> </li> </ul>"},{"location":"#912-form-templates-and-elements","title":"9.1.2 Form Templates and Elements","text":"<ul> <li>Data Elements Management: </li> </ul> <ul> <li>Options and OptionSets: </li> </ul>"},{"location":"#913-form-template-builder","title":"9.1.3 Form Template Builder","text":"<ul> <li> <p>Main Screen: </p> </li> <li> <p>Template Management: </p> </li> <li> <p>Sections &amp; Data Elements Selection: </p> </li> <li> <p>Rules and Expressions: </p> </li> </ul>"},{"location":"#92-mobile-app","title":"9.2 Mobile App","text":"<p>Datarun-Mobile's app was developed with dart (Flutter). The app facilitates the submission and synchronization of malaria-related data with the main backend system.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Dynamic Form Download: The app downloads forms designed on the backend, which can include   various question types.</li> <li>Question Types: Supports Text, Number, Date, Multi Answer, Single Answer, Image, and File   questions.</li> <li>Data Submission: Users can submit various malaria-related data directly from the app.</li> <li>Data Synchronization: The app syncs submitted data with the Data-run-Api, ensuring all   information is up-to-date.</li> <li>User Authentication: Secure login and authentication to ensure data integrity and privacy.</li> <li>User Management: Quickly create users and assign them to particular teams.   connection is restored.</li> <li>User-Friendly Interface: Simple and intuitive design to facilitate ease of use by healthcare   workers.</li> </ul>"},{"location":"#921-assignmenttasks-card","title":"9.2.1 Assignment/task's card:","text":"<p>|    |   |</p>"},{"location":"#922-v100-app-interfaces","title":"9.2.2 V1.0.0 App interfaces","text":""}]}